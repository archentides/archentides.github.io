<!doctype html>
<html ng-app="dnd">
    <head>
        <title>ARCHENTIDES</title>
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type" />
        <meta name="viewport" content="initial-scale=0.3, width=device-width" />
        <link rel='stylesheet' type='text/css' href='https://fonts.googleapis.com/css?family=Uncial+Antiqua:400' />
        <link rel='stylesheet' type='text/css' href='https://fonts.googleapis.com/css?family=Open+Sans:300,400,600' />
        <link rel='stylesheet' type='text/css' href='https://fonts.googleapis.com/css?family=Alegreya+Sans:100,300,400' />
        <link rel='stylesheet' type='text/css' href='https://fonts.googleapis.com/css?family=Averia+Serif+Libre:100,400,300,700'>
        <link href='https://fonts.googleapis.com/css?family=Kalam:400,300,700' rel='stylesheet' type='text/css'>
        <link rel='stylesheet' type='text/css' href='site.css'>
        <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script>
        <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/angularjs/1.3.15/angular.min.js"></script>
        <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/angularjs/1.3.15/angular-sanitize.min.js"></script>

        <script>
            var app = angular.module('dnd', []);

            app.controller('Main', function ($scope, $sce) {
                console.log('a');

                $scope.steps = [
                    {bg: 'black',   image: 'Map_00.png',  title: 'Game 1', subTitle: 'Sunken Hopes', copyTitle: 'Disaster',    copy: 'Aas hdflkah sdlkfh liaksdh flkash kldjfh alksdhf lkahs dlkfh askljdfh lkash dflkh aslkdfh.'},
                    {bg: 'black',   image: 'Map_101.png', title: 'Game 1', subTitle: 'Sunken Hopes', copyTitle: 'A Long Swim', copy: 'Ojh cidghil dcli lias duhcigfy dufva sdiuch vb aouidsv adsbv bvib.'},
                    {bg: '#969696', image: 'Map_102.png', title: 'Game 1', subTitle: 'Sunken Hopes', copyTitle: 'A Long Swim', copy: 'Ojh cidghil dcli lias duhcigfy dufva sdiuch vb aouidsv adsbv bvib.'},
                    {bg: '#969696', image: 'Map_103.png', title: 'Game 1', subTitle: 'Sunken Hopes', copyTitle: 'A Long Swim', copy: 'Ojh cidghil dcli lias duhcigfy dufva sdiuch vb aouidsv adsbv bvib.'},
                    {bg: '#969696', image: 'Map_104.png', title: 'Game 1', subTitle: 'Sunken Hopes', copyTitle: 'A Long Swim', copy: 'Ojh cidghil dcli lias duhcigfy dufva sdiuch vb aouidsv adsbv bvib.'},
                    {bg: '#969696', image: 'Map_1045.png', title: 'Game 1', subTitle: 'Sunken Hopes', copyTitle: 'A Long Swim', copy: 'Ojh cidghil dcli lias duhcigfy dufva sdiuch vb aouidsv adsbv bvib.'},
                    {bg: '#969696', image: 'Map_105.png', title: 'Game 1', subTitle: 'Sunken Hopes', copyTitle: 'A Long Swim', copy: 'Ojh cidghil dcli lias duhcigfy dufva sdiuch vb aouidsv adsbv bvib.'},
                    {bg: '#969696', image: 'Map_106.png', title: 'Game 1', subTitle: 'Sunken Hopes', copyTitle: 'A Long Swim', copy: 'Ojh cidghil dcli lias duhcigfy dufva sdiuch vb aouidsv adsbv bvib.'}
                ];

                $scope.curStep = 0;

                $scope.prevStep = function () {
                    $scope.curStep = ($scope.curStep + $scope.steps.length - 1) % $scope.steps.length;
                };
                $scope.nextStep = function () {
                    $scope.curStep = ($scope.curStep + 1) % $scope.steps.length;
                };

                $('html').bind('mousewheel DOMMouseScroll', function (ev) {
                    console.log('b');

                    if (ev.originalEvent.wheelDelta > 0 || ev.originalEvent.detail < 0) {
                        $scope.prevStep();
                    } else {
                        $scope.nextStep();
                    }

                    $scope.$apply();
                });
            });
        </script>
    </head>

    <body ng-controller="Main">
        <div class="header"></div>

        <div class="header2">
            <div class="buttons">
                <div class="button" ng-click="prevStep()">&lt;&lt;</div>
                <div class="button" ng-click="nextStep()">&gt;&gt;</div>
            </div>
        </div>

        <div class="wall">

        <div class="bg" ng-class="{show: $index==curStep}" ng-style="{background: step.bg}" ng-repeat="step in steps">
            <img ng-src="images/{{step.image}}" src="" alt="" />
        </div>

        <div class="tile" ng-repeat="step in steps" ng-click="nextStep()">
            <div class="content">
                <div class="title">{{step.title}}</div>
                <div class="subtitle">{{step.subTitle}}</div>
                <div class="copy-title">{{step.copyTitle}}</div>
                <div class="copy">{{step.copy}}</div>
                <div class="buttons"></div>
            </div>
        </div>
    </body>
</html>